<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>磁贴管理</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="../../plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../plugins/font-awesome/css/font-awesome.min.css">
    <!--引入样式-->
    <link rel="stylesheet" href="../../plugins/layer/theme/default/layer.css">
    <link rel="stylesheet" href="../../plugins/ztree/css/metroStyle/metroStyle.css">
    <!--样式-->
    <link rel="stylesheet" href="../../css/customDatagrid.css">
    <link rel="stylesheet" href="../../css/customDataTable.css">
    <link rel="stylesheet" href="../../css/aps.css">
    <link rel="stylesheet" href="../../css/common.css">
    <!--个人工作台样式-->
    <link rel="stylesheet" href="../../css/privatelyOwned.css">


</head>
<body>
<div class="wrapper wrapper-content bg-gray">
    <div class="ibox">
        <!--标题 按钮-->
        <div class="ibox-content">
            <div style="border-bottom: 1px solid #eee; height: 45px;">
                <h1 class="titName">磁贴管理</h1>
                <div class="pull-right btn-box">
                    <button class="btn btn-levels" id="btn-add" type="button" >注册磁贴</button>
                    <button hidden="hidden" class="fa-refresh" onclick="window.location.reload()"></button>
                </div>
            </div>
            <!--按钮-->
            <div class="clearfix" >
                <div class="apsType-box pull-left ">
                    <ul class="apsType-linkage titleName" id="titleName">
                    </ul>
                </div>
            </div>
        </div>
        <div id="iframeCon"></div>
    </div>
</div>


</body>
<script src="../../js/jquery-2.2.4.min.js"></script>
<script src="../../plugins/bootstrap/js/bootstrap.min.js"></script>
<!--附属插件-->
<script src="../../plugins/layer/layer.js"></script>
<!--自定义文件-->
<script src="../../js/customForm-aps.js"></script>
<script src="../../js/page.js"></script>

<script>
   $('document').ready(function () {
       ajaxToServerS('/api/workbench/WorkbenchTileTemplate/typeList',{},rendertitle);

   });
   function rendertitle(result) {
       var typelist=result.typeList;
       for(var i=0;i<typelist.length;i++){
           var html='<li id="'+typelist[i].id+'">'+
               '<a>'+typelist[i].name+'<span></span></a>'
               +'</li>'
           $('.titleName').append(html);

       }
       rendercontent()
   }
    function rendercontent() {


       var $ifrTab=$('#titleName').find('li');
       var $ifrBox=$('#iframeCon');


       $ifrTab.click(function () {
           var ind=$(this).index(),typeId=$(this).attr('id');
           var $ifrurl=[
               "./mMshortcut.html?&typeid="+typeId,
               "./mMnumber.html?&typeid="+typeId,
               "./mMchart.html?&typeid="+typeId,
               "./mMlist.html?&typeid="+typeId,
               "./mMcard.html?&typeid="+typeId,
               "./mMtext.html?&typeid="+typeId,
               "./mMcustom.html?&typeid="+typeId
           ];
           $ifrBox.children("iframe").hide();
           $(this).addClass('active').siblings("li").removeClass('active');
           createTagFrame("iframeCon","",$ifrurl[ind]);
//           $('#iframeCon>iframe').contentWindow.giveval(typeId)

       });
//       setFrameHeight();
    }









   function ajaxToServerS(url, data, callbackFun){
       var layerIndex = layer.load(2);
       url = url.toLowerCase().indexOf("http://") == 0? url : ("http://114.115.165.184:8080/admin-api" + url);
       $.ajax({
           headers:{
               Accept: "application/json; charset=utf-8",
               // Authorization: getCookie("token_type")+" " +getCookie("authorization")，
               Authorization: "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJqdGkiOiIwNGEzOTJkZGIwNWE0YTJmYTE2NDE4MGMwMWNkYmJmNCIsInN1YiI6IjMzIiwiaXNzIjoiYWRtaW4iLCJhdWQiOiJBZG1pbiBKV1QgT25saW5lIn0.Byouxvl_hsAYtVQ6PQ0TCHTeyfzkG6ojuGfyyc4-880"
           },
           type: "post",
           url: url,
           data: data,
           dataType: 'json',
           contentType:'application/json',
           success: function(result){
               layer.close(layerIndex);
               if(callbackFun){
                   callbackFun(result);
               }
           },
           error:function(){
               layer.close(layerIndex);
               layer.msg('请求服务器异常.');
           }
       });
   }




</script>









</html>