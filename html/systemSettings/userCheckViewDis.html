<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>增删改查</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <!--插件样式-->
    <link rel="stylesheet" href="../../plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../plugins/icheck/skins/square/green.css">
    <!--引入样式-->
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/comInnerTable.css">
    <script src="../../js/apiDomain.js"></script>

</head>

<body>

<i id="btnMenu" class="icon-th-list" style="cursor:pointer;float:right;margin:10px;"></i>
<form id="inputForm" class="form-horizontal" action="/api/sys/SysUser/save" method="post">
    <input id="id" name="id" type="hidden"/>
    <table class="table table-bordered  table-condensed dataTables-example dataTable no-footer">
        <tbody>
        <tr>
            <!--上传头像-->
            <td class="width-15 active" rowspan="2"><label class="pull-right">头像：</label></td>
            <td class="width-35 " rowspan="2" aria-disabled="true">
                <input id="nameImage" name="photo" maxlength="255" class="input-xlarge" type="hidden" value="0"/>
                <ol id="nameImagePreview"></ol>
                <a href="javascript:" id="filePicker" style="display: none"   class="btn btn-primary">选择</a>&nbsp;
            </td>

            <!--归属公司-->
            <td class="width-15 active" class="active"><label class="pull-right"><font color="red">*</font>归属公司:</label></td>
            <td class="width-35" >
                <input id="companyId" name="company.id" class="form-control" type="hidden" value="1"
                       aria-required="true">
                <div class="input-group changeCompany">
                    <input id="companyName" name="companyName" readonly="readonly" type="text" value=""
                           data-msg-required="" class="form-control valid" style="" aria-required="true"
                           aria-invalid="false">
                    <span class="input-group-btn">
                        <button type="button" id="companyButtons" class="btn   btn-primary  "><i
                                class="fa fa-search color"></i></button>
                    </span>

                </div>
            </td>
        </tr>
        <tr>
<!--
            &lt;!&ndash;归属岗位&ndash;&gt;
            <td class="width-15 active" class="active"><label class="pull-right"><font color="red">*</font>所属岗位:</label></td>
            <td class="width-35" >
                <input type="hidden"  name="jobTypeList" id="jobTypeListId">
                <select name="jobTypeList" id="jobTypeList" disabled="disabled" class="form-control"></select>
            </td>
-->
            <!--归属岗位-->
            <td class="width-15 active" class="active"><label class="pull-right"><font color="red">*</font>所属岗位:</label></td>
            <td class="width-35" >
                <!--<input type="hidden" name="job" id="jobTypeListId">-->
                <input name="job" id="jobTypeList" readonly="readonly" disabled class="form-control">
            </td>
        </tr>
        <tr>
            <!--归属部门-->
            <td class="active">
                <label class="pull-right">
                    <font color="red">*</font>归属部门:
                </label>
            </td>
            <td>
                <input id="officeId" name="office.id" class="form-control" type="hidden" value="4" aria-required="true">
                <div class="input-group">
                    <input id="officeName" name="roleName" readonly="readonly" type="text" value="" data-msg-required="" class="form-control valid" aria-required="true" aria-invalid="false">
                </div>
            </td>
            <!--工号-->
            <td class="active">
                <label class="pull-right">
                    <font color="red">*</font>工号:
                </label>
            </td>
            <td>
                <input id="no" name="no" class="form-control required" readonly="readonly" type="text" value="" maxlength="50"/>
            </td>
        </tr>
        <tr>
            <!--姓名-->
            <td class="active">
                <label class="pull-right">
                    <font color="red">*</font>姓名:
                </label>
            </td>
            <td>
                <input id="name" name="name" class="form-control required" readonly="readonly" type="text" value="" maxlength="50"/>
            </td>
            <!--登录名-->
            <td class="active">
                <label class="pull-right">
                    <font color="red">*</font>登录名:
                </label>
            </td>
            <td>
                <input id="oldLoginName" name="oldLoginName" type="hidden" value="">
                <input id="loginName" name="loginName" class="form-control required userName" readonly="readonly" type="text" value=""
                       maxlength="50"/>
            </td>
        </tr>
        <!--<tr>-->
            <!--&lt;!&ndash;密码&ndash;&gt;-->
            <!--<td class="active">-->
                <!--<label class="pull-right">密码:</label>-->
            <!--</td>-->
            <!--<td>-->
                <!--<input id="newPassword" name="newPassword" type="password" value="" readonly="readonly" maxlength="50" minlength="3"-->
                       <!--class="form-control "/>-->
                <!--<span class="help-inline">若不修改密码，请留空。</span>-->
            <!--</td>-->
            <!--&lt;!&ndash;确认密码&ndash;&gt;-->
            <!--<td class="active">-->
                <!--<label class="pull-right">确认密码:</label>-->
            <!--</td>-->
            <!--<td>-->
                <!--<input id="confirmNewPassword" name="confirmNewPassword" type="password" readonly="readonly" class="form-control " value=""-->
                       <!--maxlength="50" minlength="3" equalTo="#newPassword"/>-->
            <!--</td>-->
        <!--</tr>-->
        <tr>
            <!--邮箱-->
            <td class="active">
                <label class="pull-right">邮箱:</label>
            </td>
            <td>
                <input id="email" name="email" class="form-control email" readonly="readonly" type="text" value="" maxlength="100"/>
            </td>
            <!--电话-->
            <td class="active">
                <label class="pull-right">电话:</label>
            </td>
            <td>
                <input id="phone" name="phone" class="form-control" type="text" readonly="readonly" value="" maxlength="100"/>
            </td>
        </tr>
        <tr>
            <!--手机-->
            <td class="active">
                <label class="pull-right">手机:</label>
            </td>
            <td>
                <input id="mobile" name="mobile" class="form-control" type="text" readonly="readonly" value="" maxlength="100"/>
            </td>
            <!--用户状态-->
            <td class="active">
                <label class="pull-right">用户状态:</label>
            </td>
            <td>
                <select id="enable" name="enable" disabled="disabled" class="form-control">
                    <option value="1">可用</option>
                    <option value="0">禁用</option>
                </select>
            </td>
        </tr>
        <tr>
            <!--用户角色-->
            <td class="active">
                <input type="text" name="roleName" hidden="hidden" value="">
                <label class="pull-right"><font color="red">*</font>用户角色:</label>
            </td>
            <td>
                <input id="rolenameId" name="roleNameId" class="form-control" type="hidden" value="">
                <div class="input-group" id="ppalert">
                    <input id="roleName" name="roleName" type="text"
                           value="" data-msg-required="" readonly="readonly" class="form-control">
                    <span class="input-group-btn">
	       		        <button type="button" id="primaryPersonButton" class="btn   btn-primary  ">
                            <i class="fa fa-search"></i>
                        </button>
       		        </span>
                </div>
            </td>
            <!--备注-->
            <td class="active">
                <label class="pull-right">备注:</label>
            </td>
            <td>
                <textarea id="remarks" name="remark" readonly="readonly" maxlength="200" class="form-control" rows="3"></textarea>
            </td>
        </tr>
        <tr class="tableFoot" >
            <td class="w-15">
                <span class="pull-left">创建时间:</span>
            </td>
            <td class="w-35">
                <input type="text" id="createDate" readonly="readonly" name="createDate" class="form-control">
            </td>
            <td class="w-15">
                <span class="pull-left">修改时间:</span>
            </td>
            <td class="w-35">
                <input type="text" readonly="readonly" name="updateDate" class="form-control">

            </td>
        </tr>
        </tbody>
    </table>
</form>
<!--核心插件-->
<script src="../../js/jquery-2.2.4.min.js"></script>
<script src="../../plugins/bootstrap/js/bootstrap.min.js"></script>
<!--附属插件-->
<script src="../../plugins/validate/jquery.validate.min.js"></script>
<script src="../../plugins/validate/messages_zh.min.js"></script>
<script src="../../plugins/layer/layer.js"></script>
<script src="../../plugins/icheck/icheck.min.js"></script>
<script src="../../plugins/webUpLoader/webuploader.js"></script>
<!--自定义文件-->
<script src="../../js/jeeplus.js"></script>
<script src="../../js/apiDomain.js"></script>
<script src="../../js/customForm.js"></script>
<script src="../../js/public.js"></script>
<script src="../../js/page.js"></script>


<script>
    function filename(filen) {
        $('#nameImage').val(filen)
        var str = admin_domain + filen
        $('#nameImage img').attr('src', str)
    }
    var time = new Date();
    var m = time.getMonth() + 1;
    var t = time.getFullYear() + "-" + m + "-"
        + time.getDate() + " " + time.getHours() + ":"
        + time.getMinutes() + ":" + time.getSeconds();
    $("#createDate").val(t);
    $(document).ready(function () {
        filename();
        icheckinner();
        var id = getQueryString('id');
        $('#id').val(id);
        /*api = getQueryString('api') || 'form';*/
        if (id) {
            /*此处后端接口  id为弹出窗口自带的id 通过浏览器方法传参得到*/
            console.log(id)
            var url = "/api/sys/SysUser/view/" + id;
            ajaxToServer(url, {}, function (result) {
                console.log(result)
                if (result.success) {
                    renderData(result.sysUser, $('#inputForm'));
                    /*运行把ajax数据渲染到弹出窗口中*/
                    renderData(result, $('#inputForm'));
                    $('#jobTypeList').val(result.jobName);
                    initWebuploader('/img/sys/SysUpload/upimg?imgPath=img',
                        '#filePicker',
                        "#nameImagePreview",
                        admin_domain + '/img/sys/SysUpload/showImg/' + id
                    );
                    /*上传头像*/
                } else {
                    layer.msg(result.message);
                }

            });
        }





        layerInZtree(['300px', '424px'], './systemSettings/userCompany.html', '1', '#companyName', '#companyId', '请选择部门');


    })


    /*清除头像*/
    function getSubmitFormId() {
        return "#inputForm";
    }
    $('#companyButtons').click(function(){
        return false
    })
    $('#companyName').click(function(){
    return false
    })
</script>
</body>
</html>