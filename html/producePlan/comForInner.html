<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>参数配置</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <!--插件样式-->
    <link rel="stylesheet" href="../../plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../plugins/layer/theme/default/layer.css">

    <!--<link rel="stylesheet" href="../../plugins/select2/css/select2.min.css">-->
    <!--自定义样式-->
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/dic-inner.css">

    <style>

        #comForTextarea{
            height:100px;
            width:100%;
            border:1px solid #1ab394;
            resize: none;
        }
        .param-tag .btn{
            width:32px;
            height:32px;
            line-height: 30px;
            color:#1ab394;
            border:1px solid #1ab394;
            margin-bottom:5px;
            margin-left:5px;
            padding:0;
        }
        .btn.clearOne{
            width:72px;
        }
        .param-tag .btn:hover{
            background: #1ab394;
            color:#fff;
        }
        .param-item{margin-bottom:15px;}
        .paramName-tit,.paramName-text{
            display: inline-block;
            vertical-align: middle;
        }
        .paramName-tit{
            width:90px;
            text-align:right;
            font-size:14px;
        }
        .bg-1ab394{
            background:#1ab394;
            color:#fff;
        }
        .paramName-text, .paramCount{
            font-size:0;
        }
        .aps-innerInput{
            display: inline-block;
            vertical-align: middle;
            width:180px;
            padding:0 8px;
            outline: none;
            border:1px solid #ddd;
            border-right:none;
            height:34px;
            font-size:12px;
            background: #eee;
            cursor: pointer;
        }
        .aps-innerBtn{
            display: inline-block;
            vertical-align: middle;
            background:#1ab394;
            color:#fff;
        }
        .param-choose{
            width:158px;
            height:32px;
            line-height: 30px;
            background: #f2f2f2;
            border:1px solid #cacaca;
            color:#000;
            padding:0;
        }
        .param-record{
            width:78%;
            height:124px;
            border:1px solid #cacaca;
            padding:10px;
            resize: none;
            vertical-align: top;
        }
        .paramCount-l, .paramCount-r{
            display: inline-block;
            vertical-align: bottom;
        }
        .paramCount-l{
            width:66%;
        }
        .paramCount-r{
            width:34%;
        }
    </style>
</head>
<body>
<div class="wrapper wrapper-content">
    <div class="param-item">
        <span class="paramName-tit">参数名称：</span>
        <div class="paramName-text" id="paramCode">
            <input id="paramCodeInput"  class="aps-innerInput" name="itemCode" type="text" readonly="readonly" value="" data-msg-required="" style="" placeholder="双击选择">
            <span>
                <button type="button" id="parentNameButton" class="btn  aps-innerBtn ">
                    <i class="fa fa-search"></i>
                </button>
            </span>
        </div>
    </div>

    <div class="param-item">
        <span class="paramName-tit"></span>
        <button class="btn  param-choose" >参数选择</button>
    </div>
    <div class="param-item">
        <div class="paramCount">
            <div class="paramCount-l">
                <span class="paramName-tit">计算公式：</span>
                <textarea name="" id="" class="param-record"></textarea>
            </div>
            <div class="paramCount-r param-tag">
                <span class="btn  clearOne"><i class="fa fa-arrow-left" aria-hidden="true"></i></span>
                <span class="btn  clearAll">C</span>
                <span class="btn  bracLBtn">(</span>
                <span class="btn  addBtn">+</span>
                <span class="btn  numBtn">1</span>
                <span class="btn  numBtn">2</span>
                <span class="btn  numBtn">3</span>
                <span class="btn  bracRBtn">)</span>
                <span class="btn  subBtn">-</span>
                <span class="btn  numBtn">4</span>
                <span class="btn  numBtn">5</span>
                <span class="btn  numBtn">6</span>
                <span class="btn  decBtn">.</span>
                <span class="btn  mulBtn">x</span>
                <span class="btn  numBtn">7</span>
                <span class="btn  numBtn">8</span>
                <span class="btn  numBtn">9</span>
                <span class="btn  divsBtn">/</span>
            </div>
        </div>
    </div>
</div>

<!--核心插件-->
<script src="../../js/jquery-2.2.4.min.js"></script>
<script src="../../plugins/bootstrap/js/bootstrap.min.js"></script>
<!--附属插件-->
<script src="../../plugins/layer/layer.js"></script>
<script src="../../plugins/icheck/icheck.min.js"></script>
<script src="../../plugins/ztree/js/jquery.ztree.core.js"></script>
<script src="../../plugins/datatables/js/jquery.dataTables.min.js"></script>
<script src="../../plugins/datatables/js/dataTables.bootstrap.js"></script>
<script src="../../plugins/bootStrapPager/js/extendPagination.js"></script>
<script src="../../plugins/select2/js/select2.js"></script>

<!--自定义文件-->
<script src="../../js/public.js"></script>
<script src="../../js/common.js"></script>
<script src="../../js/jeeplus.js"></script>
<script src="../../js/customForm.js"></script>
<script src="../../js/page.js"></script>
<script>
    $(function () {
        $("#e1").select2({
            placeholder: "Select a State",
            allowClear: true
        });
        var id = getQueryString('id');

        function renderHtml() {
            var previewParam = $(".previewParam"),
                previewParamHide = $(".previewParamHide"),
                html = "";
            $(".comForIdent span").click(function () {
                html += $(this).html() + " ";
                renHtmlFn(html);

            });
            $("#e1").change(function () {
                html += $("#select2-e1-container").text() + " ";
                renHtmlFn(html);
            });
            function renHtmlFn(html) {
                previewParam.html(html);
                previewParamHide.val(html);
            }

        }

        renderHtml();

        function getZtreeVal(tit,shade,url,pushValCon){
            top.layer.open({
                btn: ['确定', '取消'],
                shade: [0.4, '#000'], //0.1透明度的白色背景
                type: 2,
                title: tit,
                shadeClose: true,
                maxmin: true, //开启最大化最小化按钮
                area: ['300px', '424px'],
                content: url,
                yes:function (index,layero) {
                    var iframeWin = layero.find('iframe')[0];
                    var selobj=iframeWin.contentWindow.getSelectVal();//在layer中运行当前弹出页内的getSelectVal方法
                    if(selobj){
                        $(pushValCon)
                        $("#paramCodeInput").val(selobj.name);
                    }

                    top.layer.close(index);

                }
            })
        }

        getZtreeVal('#paramCode','dblclick')

        $("#paramCode").on('dblclick',getZtreeVal("新增","[0.4, '#000']","./producePlan/comForZtree.html","#paramCodeInput"))


    });

</script>
</body>
</html>